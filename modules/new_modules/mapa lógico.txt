üîÑ Fluxo do M√≥dulo de Rota√ß√µes
1. Entrada de dados
Fontes: ESPN/NBA (boxscore + play‚Äëby‚Äëplay).

Objetivo: saber quem est√° em quadra, quando e com quem.

Sa√≠da: snapshots de lineups (5 jogadores, minutos juntos, posses, pontos pr√≥/contra).

2. Agrega√ß√£o e sinais
Processo: agrupar snapshots por lineup_key (conjunto de jogadores).

M√©tricas: minutos totais juntos, jogos, estat√≠sticas por 100 posses, coeficiente de varia√ß√£o (CV).

Sa√≠da: lineup_signals com players, m√©tricas, confian√ßa, contextos.

3. Inje√ß√£o no player_ctx
Campos adicionados:

expected_minutes ajustado pela forma√ß√£o.

rotation_context (starter/rotation/bench/deep_bench).

lineup_confidence.

prob_ceiling_pts/reb/ast/pra recalculados.

Objetivo: enriquecer cada jogador com contexto real de rota√ß√£o.

4. ThesisEngine
Uso dos sinais:

Teses s√≥ ativam se lineup_confidence for alta.

BigRebound refor√ßado se forma√ß√£o tem reb_per100 elevado.

AssistMatchup refor√ßado se lineup favorece spacing e co‚Äëocorr√™ncia.

ValueHunter ativado se reserva ganha minutos por aus√™ncia detectada.

CeilingExplosion s√≥ dispara se prob_ceiling_* alto + lineup_shock.

Sa√≠da: hip√≥teses por jogador/mercado com confian√ßa e motivos.

5. StrategyEngine
Composi√ß√£o:

Seleciona teses com maior confian√ßa.

Garante n√£o‚Äërepeti√ß√£o de jogadores entre narrativas.

Usa lineup_signals para diversidade real (times, roles, mercados).

Narrativas:

Conservadora ‚Üí titulares em forma√ß√µes est√°veis.

Ousada ‚Üí tetos refor√ßados por rota√ß√£o.

Banco ‚Üí reservas com minutos extras.

Explos√£o ‚Üí mercados ativados por teto + contexto.

6. CorrelationValidator
Valida√ß√£o:

Evita trixies com jogadores que n√£o compartilham minutos.

Penaliza pares que se alternam (n√£o jogam juntos).

B√¥nus para diversidade de times/mercados/roles.

Sa√≠da: score ajustado + lista de viola√ß√µes.

7. NarrativeFormatter
Formata√ß√£o:

Explica decis√£o citando forma√ß√£o: ‚ÄúJogador X est√° em lineup est√°vel com Y e Z, 25 minutos juntos em 3 jogos, refor√ßando teses de rebote.‚Äù

Sa√≠da: texto curto + tabela compacta.

8. UI e M√∫ltipla do Dia
Escala√ß√µes enriquecidas: painel lateral ‚ÄúForma√ß√µes prov√°veis‚Äù com lineup_signals.

Trixies estrat√©gicas: quatro narrativas distintas, sem repetir jogadores.

M√∫ltipla do Dia: duas vers√µes (conservadora e ousada), diversidade garantida por sinais de rota√ß√£o.

‚úÖ Resultado final
Mais realismo: recomenda√ß√µes refletem quem realmente estar√° em quadra.

Menos falsos positivos: evita sugerir jogadores com role inst√°vel.

Narrativas fortes: explica√ß√µes citam forma√ß√µes e minutos juntos.

Boost inteligente: s√≥ ativa quando teto √© plaus√≠vel pela rota√ß√£o.

ValueHunter certeiro: identifica reservas com minutos extras.

M√∫ltipla robusta: diversidade garantida por sinais de rota√ß√£o.